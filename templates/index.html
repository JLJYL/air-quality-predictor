# 假設這是您的 Flask 路由函數
@app.route('/kaohsiung')
def kaohsiung_prediction():
    # ... 您的模型預測和數據處理邏輯 ...
    
    # 這是 AQI 數據 (列表)
    aqi_data = [
        {'time': '2025-10-02 10:00', 'aqi': '56'},
        {'time': '2025-10-02 11:00', 'aqi': '58'},
        # ... 更多 AQI 數據
    ]

    # 這是污染物數據 (字典包列表)
    pollutant_data = {
        'PM25': [
            {'time': '2025-10-02 10:00', 'value': '15.4'},
            {'time': '2025-10-02 11:00', 'value': '16.0'},
            # ... 更多 PM25 數據
        ],
        'PM10': [
            {'time': '2025-10-02 10:00', 'value': '35.0'},
            {'time': '2025-10-02 11:00', 'value': '36.5'},
            # ... 更多 PM10 數據
        ],
        # ... O3, NO2, SO2, CO 也是同樣的結構
    }
    
    # max_aqi 應該從 aqi_data 中計算
    max_aqi = max([int(p['aqi']) for p in aqi_data if p['aqi'].isdigit()])

    return render_template(
        'index.html', 
        city_name='高雄',
        max_aqi=max_aqi,
        aqi_predictions=aqi_data,          # <-- 變數名稱必須是 aqi_predictions
        pollutant_predictions=pollutant_data # <-- 變數名稱必須是 pollutant_predictions
    )
